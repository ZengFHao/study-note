# 计网考试复习大纲

tips：本文没有提到的章节即为不考章节

from: 21复习课视频

author: zfh



## 第一部分 概述

### 第一章 绪论

- 数据通信的概念和模型(Data communications)
  - 概念：两台设备之间通过诸如线缆的某种形式的传输媒介进行的数据交换
    - 性质：
      - 传递性(Delivery):系统必须将数据传递到正确的目的地，数据只能由预定的设备或用户接收
      - 准确性(Accuracy):系统必须准确的传递数据，传递过程中发生改变和不正确的数据都不可用
      - 及时性(Timeliness):系统必须以及时的方式传递数据，传递延误的数据是无用的
      - 抖动性(Jitter):抖动是指分组到达时间的变化，也就是传输延迟
  - 模型：
    - 报文(message)
    - 发送方(sender)
    - 接收方(receiver)
    - 传输介质(transmission medium)
    - 协议(protocol):管理数据通信的一组规则

- 什么是网络(network)

  - 用通信链路连接起来的设备（节点）的集合

- 什么是internet

  - 也就是两个或者多个互相通信的网络
  - 与Internet的辨析
    - Internet是指最大的互联网

- 什么是协议和标准

  - 协议(protocol)：
    - 管理数据通信的一组**规则**，规定了通信的内容，通信的方式，通信的时间
    - 核心：
      - 语法(syntax):数据的结构或格式
      - 语义(semantics):每一个位片段的含义
      - 时序(timing):报文发送的时间和发送的速率
  - 标准：
    - 经过协商达成一致的规则
    - 类型：
      - 事实标准(de facto standard)：未经组织承认但已经在广泛的使用中被接受的标准
      - 法定标准(de jure standard)：由官方认可的团队制定的标准
    - ISO：国际标准化组织

- **网络模型的拓扑结构**

  - **网络连接方式：**

    - 点对点(point-to-point)
    - 多点连接(multipoint connection)

    ![image-20230301125231903](image\image-20230301125231903.png)

  - **拓扑结构**(physical topology)

    - **网状(mesh)**:各台设备之间都有一条专用的点到点链路（一般网状的链路都是双工的）

      - 优点：网状拓扑是**健壮的**，也就是说当有一条线路不可用的时候不会影响其余线路的使用，也具有良好的**安全性**，也就是说只有特定的接收方才能看见报文。

      - 缺点：由于使用点对点连接也会很容易找到故障的地方，但缺点是所需线缆和IO端口过多且安装维护困难。

        ![image-20230301131211833](image\image-20230301131211833.png)

    - **星型(star)**：每台设备拥有一条仅与中央控制器连接的点对点线路(Hub)，设备之间的传输都会经过集线器（也就是Hub）

      - 优点：健壮性，一条线路故障同样不会影响其余线路
      - 缺点：太依赖集线器，也就是说集线器坏了整个系统就寄了

      ![image-20230301131239411](image\image-20230301131239411.png)

    - **总线(bus)**：一条线路作为主干来连接网络上的所有设备

      - 优点：安装简易
      - 缺点：信号传输的越远就会变得越来越微弱（能量以热能消失），连接好后难以重新连接，有故障时不易查出，主干一寄系统全寄

      ![image-20230301131252763](image\image-20230301131252763.png)

    - 环状(ring)：每台设备只与其两侧的设备有一条专用的点对点连接

      - 优点：易于安装和重新配置，增减设备只需改变设备两边的连接
      - 缺点：一般信号是单向流通的，也就是环中线路故障也会系统瘫痪

      ![image-20230301131311670](image\image-20230301131311670.png)

    

### 第二章 网络模型

- ==OSI参考模型的概念和各层的功能！！！7层==

  ![image-20230301133208167](image\image-20230301133208167.png)

  - 各层功能

    - 物理层：通过介质传输位，将位从一个节点传到另一个节点
    - 数据链路层：将位组成帧，提供节点到节点的传递
      - 成帧
      - 物理寻址
      - 流量控制
      - 差错控制
      - 访问控制

    - 网络层：将分组从源传到目的地，提供网络互连
      - 逻辑寻址
      - 路由选择
    
    - 传输层：负责将报文从一个进程传递到另一个进程
      - 服务点寻址
      - 分段和组装
      - 连接控制
      - 差错控制
      - 流量控制
    
    - 会话层：建立、管理和终止会话，也就是对话的控制和同步
    - 表示层：翻译、加密和压缩数据
    - 应用层：向用户提供服务
      - 网络虚拟终端
      - 文件传输访问和管理
      - 邮件服务
      - 目录服务
    
    
    >
    >
    >我们也常常将其分为5层，也就是不包括会话层和表示层
    >
    >注意区分ISO和OSI：ISO是国际标准化组织，OSI是模型


- ==TCP/IP协议族和各层的功能==

  - TCP/IP协议族由五层组成：

    - 物理层
    - 数据链路层
    - 网络层
    - 传输层
    - 应用层

    >
    >
    >前四层也就OSI模型的前四层，应用层是OSI模型最上三层的整合，功能也和OSI类似
- ==物理地址、逻辑地址、端口地址==

  - **物理地址**(physical (link) addrsee)：也就是MAC地址，在出厂的时候就已经设定好了，在物理层和数据链路层使用，用12个十六进制数字表示，每个字节（两个数字）之间用“:”隔开
    $$
    eg:
    07:01:02:01:2C:4B
    $$
  - **逻辑地址**(logical (IP) address)：也就是IP地址，从一个网络换到另一个网络的时候IP地址就会发生变化,每台主机有唯一的标示，在网络层使用，长度32位
  - **端口地址**(port address)：应用的地址，也就是赋予进程的标识符，长度16位，在传输层使用



## 第二部分 物理层和介质

### 第三章 物理层

- 什么是数据

  - 数字数据：离散状态的信息，比如计算机的01数据
  - 模拟数据：连续状态的信息，比如声音等

  >
  >
  >数据是不能进行传输的，能传输的是信号，所以要传输数据就只能将其转化为信号

- 什么是信号

  - 数字信号(Analog signal)：在一段时间内只能有有限个数值，通常是01，但其实数字信号也就是复杂的模拟信号，其有两种状态，水平和数值，水平的时候看做是一直没传，所以带宽是0，垂直的时候一下子就传完了，所以带宽是无穷大，那么传输数字信号就需要无穷大的带宽
  - 模拟信号(Digital signal)：在一段时间内有无穷个强度等级

  ![image-20230301141842743](image\image-20230301141842743.png)

- 模拟和数字之间的变化
  - 模拟的信号和数据：
  - 数字的信号和数据：

- 带宽(bandwidth)的两种表示

  - 在网络中常常指信号的传输速率
  - 最高频率和最低频率的差值

- 比特率：用来描述数字信号，指一秒钟发送的位数（单位bps）

- 基带传输、低通通道、宽带传输的概念

  - 基带传输(baseband transission)：通过通道发送数字信号，该信号不转换为模拟信号
  - 低通通道(low-pass channnel)：带宽从0开始的通道，数字信号的传输需要无穷带宽这显然是我们无法办到的，所以就会有两种低通通道

    - 宽带宽：由于做不到无限带宽所以想无损传输数字信号是不可能的，那么带宽越宽传输时的损耗就越小
    - 窄带宽：通过模拟信号来近似模拟数字信号，对于最坏情况就是传输01也就是数字信号的最大变化数，这种时候也就是周期最小，频率最大，一个周期内能传两个bit，当比特率为N时就有

    $$
    f_{max}=N/2
    $$

    ​		而最小频率是0，则想要保存好数字信号，那么至少带宽
    $$
    B_{min}=N/2
    $$
  - 宽带传输(bandpass channel)：最低频率不在为0，将数字信号通过调制器转化为模拟信号后传输

- ==奈奎斯特速率、香农容量定理==

  - 一些概念：

    - 分贝：计算两种信号之间或者同一信号不同位置的相对强度(p1,p2分别是信号在位置1位置2的功率)
      $$
      dB=10log_{10}\frac{P2}{P1}
      $$
      
    - 信噪比：信号功率和噪声功率的比值：
      $$
      SNR=\frac{平均信号功率}{平均噪声功率}
      $$
    
    - $SNR_{dB}$：一般用分贝来进行描述
    
    $$
    SNR_{dB}=10log_{10}SNR
    $$
    
    
    
  - 奈奎斯特速率(Nyquist bit rate)：求通道最大比特率，应用在无噪声的理想通道，不包含信噪比
    $$
    N=2\times B\times log_2L
    $$
    N：比特率	B：带宽	 L：电平数
  
    >
    >
    >增加电平数会减弱系统可靠性，因为当电平多了之后就不太好区分也更容易失真，可能就会导致翻译错误等
  
  - 香农容量定理(Shannon Capacity)：是在有噪声的通道，包含信噪比
    $$
    通道容量=B\times log_2(1+SNR)
    $$
  
    >
    >
    >香农容量定理给出了数据速率的上限，奈奎斯特给出了所需的电平数
  
- ==性能==

  - 带宽(band)：信号速率或者频带宽度

  - 吞吐量(throughput)：每秒传输成功的数据量（包含往返时间）

  - 信道利用率：吞吐量/带宽

  - 传播时间(propagation time)：和两个站点之间的距离，传播的介质有关
    $$
    propagation\  time= \frac{两点距离}{传播速度}
    $$
  
- 传输时间(transmission time)：和两个站点之间的距离，传播的介质都无关，和帧的长度以及传输速率有关，指的是帧的第一个bit和最后一个bit之间的时间
  
$$
  transmission\ time =\frac{报文长度}{带宽}
$$





### 第四章 数字传输

- 数据元素、信号元素、数据速率、信号速率的概念

  - 数据元素：表示数据的最小单元，是我们想发的
  - 信号元素：表示信号的最小单元，是我们能发的，用信号元素来承载数据元素
  - 数据速率：一秒发送的数据元素的数量（又称bit rate）
  - 信号速率：一秒发送的信号元素的数量（又称baud rate）
  - 承载因子：每个信号元素承载的数据元素的数目

- ==线路编码方案！！！！！==

  - 单极性编码NRZ：电平只在时间轴的一边，正电平为1，零电平为0

    ![image-20230301170936538](image\image-20230301170936538.png)

  - 极性编码NRZ-L和NRZ-I（都有DC问题）

    - NRZ-L：高电平表示0，低电平表示1
    - NRZ-I：跳变为1，不跳变为0

    ![image-20230301170958550](image\image-20230301170958550.png)

  - 归零码RZ：负-0-正表示0，正-0-负表示1

  ![image-20230301171012909](image\image-20230301171012909.png)

  - 双相码：曼彻斯特和差分曼彻斯特==最最重要==

    - Manchester：正-负表示0，负-正表示1
    - Differential Manchester：下一位是0则跳变，下一位是1则不跳变（相交位置）

    ![image-20230301171040272](image\image-20230301171040272.png)

  - 双极性编码：AMI和伪三元码

    - AMI：零电平表示0，每次1都与前一个1反向
    - 伪三元码(pseudoternary)：零电平表示1，每次0都与前一个0反向

    ![image-20230301171056096](image\image-20230301171056096.png)

- 模拟到数字的转换

  ==脉码调制PCM==

  - 采样以及采样率
    - 采样(sampling)：也就是通过采集的样本来用数字信号近似模拟信号
    - 采样率(sampling rate)：采样时间间隔的倒数
    - 采样速率必须至少是所含信号最高频率的两倍
  - 量化等级：模拟信号理那个量化等级近就用其近似，以下图为例有八个量化等级，等级数取决于模拟信号的振幅范围以及需要准确恢复信号的难度，量化等级越多自然就越精确

  ![image-20230301173107613](image\image-20230301173107613.png)

  - 量化误差：输入值是实际值，输出值是近似值，两者之间的差异



### 第五章 模拟传输

- 比特率和波特率

  $$
  S=N\times \frac{1}{r} \ baud
  $$
  

  >
  >
  >比特率是每秒发送的位数，波特率是每秒发送的信号元素，在数字数据的模拟传输中，波特率一定小于等于比特率，因为我最起码能用一个信号单元来表示一个数据单元吧

- 数字到模拟的转换
  - ==ASK的概念以及工作原理==及ASK的带宽
    - 通过载波信号的振幅来生成信号元素
    - 二进制ASK(BASK)：有波表示1，全0表示0
      
      ![image-20230301174204533](image\image-20230301174204533.png)
    - 多电平ASK则用更多振幅来表示多位数据
    
    - BASK带宽：
      $$
      B=(1+d) \times S
      $$
      B为带宽，S为信号速率，d是一个因子取值在0,1之间
    
  - ==FSK的概念以及工作原理==及BFSK带宽
    - 通过改变载波信号的频率来表示数据
    
    - BFSK
      
      ![image-20230301174550910](image\image-20230301174550910.png)
      
    - 带宽
      $$
      B=(1+d) \times S+2\Delta f
      $$
    
  - ==PSK的概念==
    - 通过改变载波的相位来表示两个或更多的数据
    - BPSK
      
      ![image-20230301174752163](image\image-20230301174752163.png)
    - 带宽
      - 同BASK
  
- 模拟信号调制：通过模拟信号来模拟信息，当介质具有带通特性或者只有某一带宽可用
  - ==AM、FM、PM的概念以及大致的工作原理==

    - AM:对载波信号进行调制，使其振幅随着调制信号的振幅变化而被改变，载波的频率和相位保持不变

    ![image-20230301175637694](image\image-20230301175637694.png)

    - FM：载波信号的频率随着调制信号的电平（振幅）的改变而调整。载波信号的振幅和相位不变

    ![image-20230301175652754](image\image-20230301175652754.png)
    
    - PM：载波信号的相位随着调制信号的电平（振幅）的改变而调整。载波信号的振幅和频率不变
    
      ![image-20230301175714049](image\image-20230301175714049.png)
    
      



### 第六章 带宽利用

- ==T1载波、E1载波记住数字，见P115==
  - T1
    - 速率：1.544 Mbps
    - 语音通道：24

  - E1
    - 速率：2.048 Mbps
    - 语音通道：30




## 第三部分 数据链路层

### 第十章 检错和纠错

- ==纠错的概念与方法：汉明距离、最小汉明距离（两个公式）==

  - 汉明距离(Hamming distance)：两个相同长度字符串对应位置不同字符的数量
    $$
    eg:d(000,011)=2
    $$
    
    >
    >
    >其实也就可以看成是每个对应位做异或运算，结果为011，有两个1则结果为2
    
  - 最小汉明距离(minimum Hamming distance)：即上述一组汉明距离中最小的
  - 两个公式
  
    - ==检测(error detecrtion)==出所有情况下最多S个错误,块编码中最小汉明距离
  
    $$
    d_{min}=s+1
    $$
  
    
  
    - ==纠正(error correction)==所有情况下最多t个错误，块编码中最小汉明距离
      $$
      d_{min}=2t+1
      $$
      
  
- 汉明码怎么进行编码，怎么进行纠错

  ​	$d_{min}=3$，也就是说能检测2个错误，纠正1个错误

  - 汉明码的编码

    假设最小汉明距离为m，码长为n，数据长为k，r为校验位的长度，则有以下关系
    $$
    n=2^m-1,k=n-m,r=m
    $$
    确定了各部分长度之后进行编码

    步骤

    - 确认校验位和数据位的位置：校验位是$2^x$的位置，比如1,2,4,8递增，其余位置为数据位
    - 确认数据位的值：数据位的值也就是按照原码的顺序依次填入
    - 确认校验位的值：
      - 按照下图画圆（本书讲的都是最小汉明距离为3的情况）
      - 其中最外大圈的值是校验位的位置，1，2，4，内圈就是各相交部分的和
      - 则校验位1的值就是由3,5,7数据位共同决定，有奇数个1则为1，偶数个1则为0（通常都是奇校验的）

    ![image-20230302150518108](image\image-20230302150518108.png)

    eg：原码1101

    则有下表

    ​	

    | p1   | p2   | 1    | p3   | 1    | 0    |  1   |
    | ---- | ---- | ---- | ---- | ---- | ---- | :--: |

    p1=111=>1

    p2=101=>0

    p3=101=>0

    则完整汉明码为：

    |  1   |  0   |  1   |  0   |  1   |  0   |  1   |
    | :--: | :--: | :--: | :--: | :--: | :--: | :--: |

  - 汉明码的检错：

  - 假设第六位出现错误0->1

    - p1=1    111=>0
    - p2=0    111=>1
    - p3=0    111=>1

    所以就是110位置出错也就是第六位

    >
    >
    >检验的时候是用码中的校验位和对应的数据位共同来看，奇数个1为1，偶数个1为0，大位置检验位是高权位

- ==怎么计算循环冗余码CRC！！！！！巨重要==

  - 补充位数：在原来的码上增加生成多项式最高权的位数

    eg：生成多项式为1011，等同于$1X^3+0X^2+1X^1+1X^1$最高权为3，则增加3位全补为0

  - 进行模2除法：首位相同则商1，首位不同则商0，两式异或得出本步结果

  - 确定校验位：余数即为校验位

  ![image-20230302154658986](image\image-20230302154658986.png)

- CRC检错能力的分析

  - 检测单个位差错：如果生成多项式至少有两项并且$X^0$的系数为1，则所有单个位差错都能捕获

  - 两个独立位差错：如果生成多项式不能整除$X^t+1$(t在0到n-1之间)

  - 奇数个差错：包含因子x+1的生成多项式

  - 突发性差错：

    - L<=r，全能检测
    - L=r+1，$1-(1/2)^{r-1}$的概率被检测到
    - L>r+1，$1-(1/2)^r$的概率被检测到

    >
    >
    >L是检查出的错误个数
    >
    >r是生成多项式的最高次幂减最低次幂




### 第十一章 数据链路控制

- 成帧(faming)

  - 固定长度成帧
  - 可变长度成帧：用一个记号来表示帧的开始和结束
    - 面向字符协议：用flag来标志帧的开始和结尾，如果数据字中有flag则用Esc进行转义，如有Esc则用Esc表示，也就是说数据段第一个Esc一定是转义字符(escape character)
    - 面向位协议：用01111110表示帧开头结尾，当有5个连续的1在数据段时插入一个0

- 流量控制和差错控制的概念

  - 流量控制(flow control)：发送方在等到来自接收方确认之前能传输多少数据
  - 差错控制(error control)：基于自动重复请求(ARQ)，接收方能够提示发送方在传输过程中有帧的缺失或破坏

- ==停止等待协议ARQ、回退N帧ARQ、选择重发ARQ！！！==

  - 停止等待ARQ(Stop-and-Wait ARQ)

    - 原理：发送方发一个帧，接收方接受到检查没问题则发一个ACK，发送方接收到ACK则传下一个帧
      - 有问题的情况
        - 发送过程帧丢了：发送方有一个计时器，如果在规定时间内没收到ACK则自动重传
        
        - 发送的帧有破损：当做丢失处理
        
        - 发送的ACK丢了：等到计时结束重传
        
          ![image-20230302161356092](image\image-20230302161356092.png)
  
    - 窗口大小：
      - 发送方：1
      - 接收方：1
  
  - 回退N帧ARQ(Go-Back-N ARQ)
  
    - 原理：由于停止等待ARQ发送方每次都要等接收方传回ASK后才能传下一个帧，导致效率低下，那么为了提高通道利用率，在接收到确认信息之前多发几帧，当然都会保留副本直到ASK的到来
  
      - 有错误的情况
        - 发送的帧丢失：发送方会继续发帧，但是接收方一直没等到自己预期的，所以一直没反应，也不会发ASK那么就直到发送方能发的全发完还没ASK就进行重发	
  
      - 累计确认：因为没有ASK传回来的时候发送方会一直发，比如说期待的是第0帧的ASK但是这个ASK在传输过程丢失了，发送方还是再发，接收方接受到1帧的时候发送1帧的ASK也可以将0帧的ASK确认
  
    - 滑动窗口(sliding window):
  
      - 发送方：$2^m-1$，eg：用0-15编号，则发送窗口为15个帧的大小，m=4
  
      > 如果不满足，当所有的ASK都都丢失的时候，会从0帧开始进行重传，但接收方本来都已经接受过了，但以为你是新一组的0帧则又全部接受了
  
      - 接收方：1
  
        ![image-20230302164409268](image\image-20230302164409268.png)
  
  - 选择性重发ARQ(Selective Repeat ARQ)
  
    - 原理和回退N帧类似，不同之处是回退N帧接受窗口只有一个，选择重发的接受窗口也是多个，其余的和其都类似
    - 窗口大小：
      - 发送方：$2^{m-1}$，eg：用0-15编号，则发送窗口为15个帧的大小，m=4
      - 接收方：$2^{m-1}$


  - 区别
    - 停等是回退N帧的一种特例，即发送窗口为1的时候
    - 回退N帧和选择性重发的滑动窗口大小不一致
    - 回退和选择两种窗口内的每个帧都有自己的计时器，并且都能累积确认
  - 看懂伪代码

  



### 第十二章 多路访问

- 随机访问：
  - 纯ALOHA(pure ALOHA):
  
    - 每个站点有帧想发你就发，但由于所有站点都共享通道所以就可能会产生冲突，如下图只有两个帧是有效的取余都是被损坏，没发一个帧就等待接收方的确认，计时器到了还没收到确认就重发这些帧
  
    ![image-20230302170025292](image\image-20230302170025292.png)
  
    - 但由于大家都一起重发的那么又很容易冲突，则会在计时结束后随机等待一个时间后再重发，称为$T_B$
    - 重新传还是可能会冲突要是你一直传一直冲突就把通道占着又不干事，那么就有一个最大尝试次数K，即尝试超过K次就放弃发送
    - 脆弱时间：可能发生冲突的时间
  
    $$
    纯ALOHA脆弱时间=2\times T_{fr}
    $$
  
    >
    >
    >$T_{fr}$是帧所需的传输时间，也就是说我发一个帧保证没冲突的话就要前后一个$T_{fr}$都没人和我抢
  
  - 时隙ALOHA(slotted ALOHA)
  
    - 把时间分隔成$T_{fr}$的时隙，强制站点只能在这些时隙的开始发帧，其余原理都和纯ALOHA相同
    - 脆弱时间
      $$
      时隙ALOHA脆弱时间=T_{fr}
      $$
  
    > 
    >
    > 只能在时隙开始的时候发，那么也就是我发的时候这个时隙别人别用就好
  
  - ==CSMA==
  
    - 也就是不像ALOHA一样想发就发了，在发的时候我先听一下介质有人再用没，没用我就发，有人在用我就等着，这虽然能减少冲突的几率，但不是消除
  
      - 比如我在听的时候觉得介质没人在用，是因为别人发东西了，但是还没到我这，所以我发，等到别人发的帧到我这的时候发现已经迟了，两个帧都被破坏
      - 再比如我俩都听到是没人用，所以我俩一起发
  
    - 听的时候发现通道忙怎么办
  
      - 1-坚持型：空了就发，忙着就一直听
      - 非坚持型：空了就发，忙着就随机等一个时间之后在听你忙不忙
      - P-坚持型：空了就P的概率发，（1-p）的概率等一个时间单位，（当P=1时退化成1-坚持型）
  
    - 脆弱时间
      $$
      CSMA脆弱时间=T_p
      $$
  
    >
    >
    >$T_p$是帧在介质中的传播时间
    >
    >也就是说最差的情况我在介质的这头发东西，一直到那头的时间内你们都别发
  
  - ==CSMA/CD(最小帧长)！！！！！最重要==
  
    - 原理：边发边听，由于CSMA在发的时候没听，所以当冲突发生的时候根本不知道还在发，就白占着通道，CSMA/CD就是在发的时候也在听，当听到别人再发了就知道再发也没用了，直接先放弃
    - 最小帧长度
  
    $$
    最小传输时间T_p=2T_{fr}
    $$
  
    >
    >
    >因为一旦站点把帧发送完了之后就不会保留副本了，那要是帧太短，我已经发完了你再给我说冲突了我也没办法，所以最坏的情况就是两个站点正好在介质两端，A刚到B的时候B正好也发，这个时候B知道了不发了，虽然前面已经发过东西了，但怕就几个bit别人检测不到于是发一个jamming信号标志已经发生冲突了，在到传播到A，这个时候A正要发完的时候发现妈的原来冲突了，于是保留副本准备重发
  
  - ==CSMA/CA==
  
    - 原理：由于无线局域网因为一些原因（见14章）不能简单套用适用于有线局域网的CSMA/CD协议，增加了一个碰撞避免功能，使用的是停止等待协议，数据帧很长则容易受噪声的影响，所以将其切为小块采用简单的停等ARQ
  
      - 帧间间隔IFS：所有站点完成发送之后不能立即发送下一帧，而是要等待一个很短的时间间隔（也就是监听一小会），时间的长短取决于帧的类型，优先级高的帧听的时间短，反之听的时间长
  
      - RTS(request to send)：当我想给你发东西的时候，发一个RTS给你，里面有我的地址你的地址，要发长时间等信息，如果介质忙碌则等待
  
      - CTS(clear to send)：对于RTS的一个回复，发给RTS的源站点，之后就建立了联系，这样才能开始发送数据
  
      - 发送完一帧，接收方发一个ACK，发送方收到之后再发下一帧
  
        ![image-20230303133427908](image\image-20230303133427908.png)
  
        >
        >
        >这样就解决了隐蔽站的问题，当两人正在传输数据的时候，另一个小三也想传，就发送了RTS但是这个时候不会返回一个CTS，所以小三就一直插不进去

### 第十三章 有线局域网：以太网

- 了解以太网有哪些类型，传输速率怎么样即可
- 标准以太网(Standard Ethernet)：10Mbps
- 快速以太网(Fast Ethernet)：100Mbps
- 千兆以太网(Gigabit Ethernet)：1Gbps
- 10千兆以太网(Ten-Gigabit Ethernet)：10Gbps



### 第十四章 无线局域网

- 无线局域网WLAN的体系结构

- ==802.11 MAC子层==
  - 分布式协调功能(DCF)：使用的是CSMA/CA，而不是有线的时候用的CSMA/CD
    - 原因：
      - CSMA/CD为了冲突检测，站点必须在发送数据的同时，不断地监听通道，但这在无线局域网设备中实现花费过大，因为无线局域网是向四周发送，如果要具备CSMA/CD的监听功能就要360度布线显然是不可能的
      
      - 即使我们能够实现碰撞检测的功能，在发送数据时检测到通道是空闲的但是在接收端仍可能发生碰撞
        - 隐蔽站点(Hidden station problem)：A，C感知不到对方都以为介质是空闲的同时给B发
        
        ![image-20230303130001178](image\image-20230303130001178.png)
        
        >
        >
        >通过CTS帧就避免了
        
        - 暴露站点：A给B发，C准备给D发，本来是不会有影响的，但是C听见A在发被限制了发送，也就是说这个时候C太保守了，浪费了通道
        
          ![image-20230303130710475](image\image-20230303130710475.png)
    
  - 点协调功能(PCF)：在DCF基础上实现
  
- ==帧结构==：MAC帧分为7个字段
  - 前导符(preamble)：7个字节，其中10交替出现预示有帧要到来，提供一个通知和自同步时钟（其实是物理层加入的并不是帧的一部分）
  - 起始帧分解符(SFD)：1个字节10101011，说明帧的开始，最后的同步机会
  - 目的地址(DA)：6个字节，包含目的站点或接受该分组的站点的物理地址
  - 原地址(SA)：6个字节，包含发送方的物理地址
  - 类型(Type)：2个字节，定义数据字段的字节数
  - 数据(Data)：上一层协议封装的数据，==最少46字节，最多1500字节==
  - CRC：4个字节，进行差错检测


![image-20230302195135805](image\image-20230302195135805.png)

- ==CSMA/CA==
  - 见十二章



### 第十五章 连接局域网、主干网和虚拟局域网

- 各种连接设备工作在哪一层：无源集线器、中继器、有源集线器、网桥、==透明网桥==、生成树、二层交换机、路由器、三层交换机、网关、==冲突域和广播域==

  - 无源集线器：物理层以下，只是一个连接器连接来自不同分支的线路
  - 中继器(repeater)：仅工作在物理层

    - 连接一个局域网的各个网段
    - 转发每一帧，不具备过滤能力
    - 是一个再生器，不是一个放大器：放大是不改变波形的，再生是将被破坏的波形恢复

  - 有源集线器(Hub)：是一个多端口的中继器，工作在物理层
  - 网桥(bridge)：工作在物理层和数据链路层，在物理层中重新生成接收到的信号，在数据链路层检查帧包含的MAC(物理地址)地址

    - 网桥和中继器的区别：网桥是具有过滤能力，会检查帧的目的地址并决定该帧被转发还是被抛弃
    - 网桥不会改变帧所包含的物理地址(MAC地址)

  - 透明网桥(transparent bridge)：连接的站点完全意识不到其存在，所以在增加或移除一个透明网桥的时候不需要重新配置 

    - 转发(forward)：要能正确的转发到正确的端口
    - 学习：最早的网桥转发表是静态的需要手工输入，透明网桥具有学习能力，即当表中没有目的地址时进行广播泛滥(flood)，给每一个都发看谁接受了就将其记录到转发表中

    >
    >
    >由于转发表中没有目标地址需要进行泛滥，所有得保证没有冗余网桥，不然就会有循环问题
  - 生成树(spanning tree)：解决循环问题所提出，是一个没有循环路径的树

    - 生成树算法STP：
      - 选举根：ID号最小的作为根节点，进行广播告知其他谁是根网桥
      - 选择端口：如果是交换机则只能有一个输入端口，看根节点到目的地址的最小代价
      - 转发端口和阻塞端口：将不在树中的端口进行阻塞不让其通过该端口传输数据

  - 二层交换机(two-layer switch)：工作在物理层和数据链路层，说交换机的时候要说清其层次，本质是端口更多且效率更好的网桥，与网桥不同的是还有缓存区来保存帧进行处理
  - 路由器(router)：工作在网络层，数据链路层和物理层，连接LAN和WAN，路由表通常是动态的，具体的见22章
  - 三层交换机(three-layer switch)：其实就是路由器，但更快更复杂
  - 网关(Gateway)：工作在全部所有层
  - 冲突域和广播域：

    - 冲突域：连接在同一物理介质上的所有站点的集合
    - 广播域：接收同样广播消息的节点集合

    ![image-20230303151411453](image\image-20230303151411453.png)

    ![image-20230303151612487](image\image-20230303151612487.png)

    >
    >
    >一个广播域，四个冲突域

- 虚拟局域网的概念

  - VLAN：两个站点属于不同的物理LAN，那么他们之间本来是不能进行通信的，那在两个站点之间建立虚拟局域网，则通过软件层面而非物理线路可使其通信
  - VLAN也就是创建广播域




## 第四部分 网络层

### 第十九章 逻辑寻址

==常常考计算题==：最终的结果以十进制显示

​	主机号是不能全0或者全1的

- IPv4地址：A、B、C、D、E五类地址，32位长
  - 如果是二进制标记(binary notation)(看第一个字节)
    - A:0
    - B:10
    - C:110
    - D:1110
    - E:1111
  
  - 如果是点分十进制标记(dotted-decimal notation)
    - A:0-127
    - B:128-191
    - C:192-233
    - D:224-239
    - E:240-255
  
- 子网(subnetting)：一个组织机构指派A类或者B类中的一大块地址将其划分为几个组别，并赋予每个组别一个较小的网络
  - 给一个地址块，要求画出多少个子网
  - 根据设备的需求，画出多少个子网
  
- 掩码(mask)：为了避免IP地址的浪费，不再将IP地址简单分为ABC这种类别，而是用连续的1串（表示网络号）后跟着连续的0串（表示主机号），在一个网络中掩码是固定不变的

  - 下图的网络号是21位，最终的网络地址就是IP地址和掩码

    - 网络号进行与运算
    - 主机号进行或运算

    ![image-20230304125424279](image\image-20230304125424279.png)

  - 掩码的表示

    - 点分表示：200.6.8.0,255.255.248.0（后者是完整的掩码）

    - 位数表示：200.6.8.0/21（表示掩码中网络号有21位）

      




- ==子网划分、子网的地址范围、地址聚合！！！！一定会考==

  - 子网划分：就是将IP地址中的主机号划分为子网号+主机号	

  ![image-20230304130131455](image\image-20230304130131455.png)

  - 选定的子网掩码能创建多少个子网：$2^x$个，x为子网掩码借走的主机号位数
  - 每个子网能包含多少台主机：$2^y-2$台，y是子网掩码没被借走的主机位数，为什么减2是因为全0和全1不能使用
  - 地址聚合：
    - 例如：为缩小路由表，请根据10.1.70.0/24、10.1.71.0/24、10.1.72.0/24、10.1.73.0/24等4个子网进行地址聚合，求出超网地址。
      10.1.70.0/24 10.1.01000110.0
      10.1.71.0/24 10.1.01000111.0
      10.1.72.0/24 10.1.01001000.0
      10.1.73.0/24 10.1.01001001.0
      故可得超网地址为：10.1.64.0/20
    - 步骤：
      - 将不同的部位先改写为2进制，如上题改写为了01000110等
      - 将相同的部分保留下来不同的用0代替，改写为01000000，也就是64
      - /后是相同的位数，有20位是相同的

- ==网络地址转换NAT的概念==

  - 转化的是什么：用全球NAT地址来替换自己外发分组中的源地址，也就是将私网地址转化为公网地址
    - 私网地址：
      - 192.168.x.x
      - 10.x.x.x
      - 172.16.x.x
  - 为什么进行转化：NAT能够使用户在内部拥有大量的地址，而在外部只有少量的地址，来解决IP地址短缺的问题
  - 怎么进行转化

  ![image-20230304133238518](image\image-20230304133238518.png)

  >
  >
  >S是源，D是目的地
  >
  >也就是从我的源转化成你的源就行
  >
  >选B

- IPv6知道有128位和IPv4不一样即可

### 第二十章 IP协议



- ==数据报(datagram)的格式==
  - IPv4数据报的首部包含哪些字段
    - 版本(VER)
    - 头部长度(HLEN)：20到60字节之间，默认是20个字节
    - 服务类型(service type)：又叫差分服务(differentiated service)
  - 首部有多长：20-60字节
  - 数据报的总长度：20-65535字节
  - 数据部分的最小长度，最大长度
    - 最小长度46字节
    - 最大长度1500字节
- ==分片==
  - 标识(identification)：如果一个报文不分片，不同报文之间的16位标识符是不同的；如果一个报文分片了，分片报文的16位标识符是一样的，说明这些分片报文原本属于一个完整的报文。
  - 标记(flags)：1位保留、1位标识禁止分片、1位标识更多报文（1说明后面跟了具有16位标志符的报文，0说明后面没有）
  - 分段偏移(flagmentation offset)：分片以后，各个部分在原始报文的哪个位置，即在原始报文中的偏移量
  - 分片和重装在什么地方进行
    - 分片在原主机进行或者路由器进行
    - 重装在目的主机进行
- ==MTU==
  - 定义了数据段的最大长度

- IPv6的分组格式和IPv4有什么变化
  - 哪些去掉了，哪些保留了



### 第二十一章 地址映射、差错报告和多播



- ==ARP逻辑地址到物理地址的映射==：也就是把IP地址转换为MAC地址，**只能工作在同一网段**，即在广播域内进行广播

  - 概念：源主机的应用程序知道目的主机的IP地址和端口号，却不知道目的主机的硬件地址，而数据包首先是被网卡接收到再去处理上层协议的，如果接收到的数据包的硬件地址与本机不符，则直接丢弃。因此在通讯前必须获得目的主机的硬件地址

  - 功能：在主机 ARP 高速缓存中存放一个从 IP 地址到硬件地址的映射表，并且这个映射表经常动态更新。

    - 有想要的IP地址就直接拿MAC地址，没有就通过ARP去查
      - 通过广播发送请求包，然后以单播的形式传回应答包

    - ![image-20230304144153147](image\image-20230304144153147.png)

  - 分组格式

    - 硬件类型(hardware type)

    - 协议类型(protocol tyoe)

    - 硬件长度(hardware length)

    - 协议长度(protocol length)

    - 操作(opreation)

    - 发送方硬件地址(source hardware address)

    - 发送方协议地址(source protocol address)

    - 目标硬件地址(destination hardware address)

    - 目标协议地址(destination protocol address)

  - 封装

    - 直接封装在数据链路帧中，在其数据段中

  - 4种操作 

    - 发送方是一个主机，想发给同网段的另一主机
    - 发送方是一个主机，希望通过路由器发送给另一网段的另一主机
    - 发送方是一个路由器，收到一个数据报后发送给另一个网络上的主机
    - 发送方是一个路由器，收到一个数据报后，发送给同一网络上的主机

    >
    >
    >ARP解析的是什么地址？实现什么地址到什么地址的转换？ARP只能在同一个网段进行，是需要广播来寻找物理地址，广播只能在局域网传播，不能穿过路由器

- ==ICMP==
  - 概念：在网络设备之间传递各种差错和控制信息，收集诊断网络信息排除网络故障
  - 报文格式：头部+数据
    - 头部：8字节
    - 数据：可变长
  - 差错报告 ==这个是重点==
    - 目的端不可达(destination-unreachable message)：路由器不能给数据报找到路由或者主机来接受
    - 源端抑制(source-quench message)：当路由器或主机因阻塞而丢弃数据报
    - 时间超时(time-exceeded message)：未在规定的时限内到达主机，或者由于路由表差错一直死循环
    - 参数问题(parameter-problem message)：目的主机发现参数有二义性户或者某个字段缺少了某个值
    - 重定向(redirect)：主机将报文发送给了错误的路由器，该路由器再发送给正确路由器的过程
  - ping
    - 也就是源主机发送一个ICMP请求报文，如果目标机器正常工作则会回送报文响应

### 第二十二章 传递、转发和路由选择



- 看懂转发技术和转发过程

  - 直接传递：目的端主机是和发送端主机连接在同一物理网络（通过看掩码是否一样就可以，因为一个网段只能有唯一的一个掩码）
  - 间接传递：目的主机和发送方不在同一网络，将分组通过路由器传到另一路由直到和目的端连接的路由器为止（最后的传递一定是直接传递）

- ==路由表、地址聚合和最长掩码匹配==

  - 怎么算地址聚合(address aggregation)：见19章

  - 什么是最长掩码匹配：在路由表中是按照最长的前缀进行存储，那也就是说/27的存储一定是在/26之前，先匹配/27，匹配失败才会看/26

  - 为什么要进行地址掩码匹配：如图当一个组织在地理位置上和其他三个不相邻，组织4没有连接到R1上，当一个分组的目的地址是组织4的140.24.7.200时，将R2的第一个掩码/26作用给他就能到正确的端口m1,若是给/24则会去到错误的端口

    ![image-20230304155753581](image\image-20230304155753581.png)

- ==Dijkstra算法Bellman-Ford算法！！！==

  - Dijkstra算法：关注的是点

    - 先将所有节点都画入表格中，全部的距离都是无穷，根节点路径长度为0，加入到已知集合
    - 找到与已知结合节点所连接的节点中的各点距离，选择最短的加入到已知集合
    - 当已知集合到某点的距离变短则更新表格

    ![image-20230304163924784](image\image-20230304163924784.png)

  - Bellman-Ford算法：关注的是边，和dj不同的是还能适用于边是负值的情况

    - 我总感觉和Dijkstra差不多

- ==域内、域间路由选择协议==

  - 域内(intradomain routing)
    - RIP：基于距离向量（Distance-Vector），任何路径不能大于15跳
      - 掌握工作原理：
      - 路由表怎么生成

        - 先将邻居发来的表补充完整，加上下一跳的节点
        - 将补充完整的表代价都+1，因为到邻居节点需要多一跳
        - 观察自己的表和修改后的邻居表如果有更短的就替换
        - 如果邻居发来的表有自己没有的表项则添加，如下需添加N3的表项

        ![image-20230304172115321](image\image-20230304172115321.png)

        >
        >
        >最终替换N2,N6
      - 初始状态什么样：每一个点只知道与他直接连接的邻站(immediate neighbor)，不是邻站的标记为无穷大
      - 共享：路由表有三列，去往，代价，下一结点，但是下一结点共享是没用的所以共享的是前两项的完整表
      - 一段时间后变成什么状态：表项是会动态变化的
      
    - OSPF，基于链路状态（link-state）
      - 工作原理：每个节点都有该区域的全部拓扑结构，根据这个结构用Dijkstra建立路由表，分为主干区域和从区域，所有的从区域都必须连入主干区(DR)域进行通信，不能两个从区域直接连接
      - 基于链路状态，运用Dijkstra，将网络拓扑抽象为图后对于每个节点运用Dijkstra算法
      
      ![image-20230305122635204](image\image-20230305122635204.png)
      
      ![image-20230305122652659](image\image-20230305122652659.png)
      
      - 涉及链路状态分组
        - 问候分组(Hello)：用于发现邻居路由器的可达性
        - 数据库描述（Database description)：向邻居路由器给出自己链路状态数据库中所有的链路状态信息
        - 链路状态请求(Link state request)：向邻居路由器请求发送某些链路状态项目的详细信息
        - 链路状态更新(Link state update)：将其链路状态信息进行洪泛发送，即用洪泛对全网的链路状态进行更新
        - 链路状态确认(Link state acknowledgement)：对链路状态更新分组的确认
      - 涉及洪泛：也就是向所有人进行广播
    
  - 域间(interdomain routing)

- ==AS的概念==

  - 自治系统，是一个单一管理机构管辖下的一组网络和路由器，通过其定义了域内和域间的概念




## 第五部分 传输层

### 第二十三章 UDP、TCP和SCTP

==不要求SCTP,了解UDP，TCP是重点==

- 知道UDP的概念：无连接的不可靠传输层协议，除了提供进程到进程通信而不是主机到主机通信外，没有给IP服务增加任何东西

- UDP和TCP的对比

  - 一个是有连接的一个是无连接的
  - 一个是可靠的一个是不可靠的
  - 一个是保存报文边界的一个是不保存的
  - 一个是面向报文的，一个是面向字节的
  - UDP可以理解为写信，我只管把信寄出去你收不收到和我没关系，TCP可以理解为打电话，必须你接通电话之后我们才能通信

- 怎么计算校验和

  - 将UDP各部位都拆成2字节（16bit）的样子
  - 进行加法
  - 最终的进位办到最后再加上
  - 将最终的结果取反得到校验和

  ![image-20230305135557318](image\image-20230305135557318.png)

- 什么时候用UDP什么时候用TCP

  - TCP
    - 适合于对传输质量要求较高，以及传输大量数据的通信。
    - 在需要可靠数据传输的场合，通常使用TCP协议
    - MSN/QQ等即时通讯软件的用户登录账户管理相关的功能通常采用TCP协议

  - UDP
    - 发送小尺寸数据（如对DNS服务器进行IP地址查询时）
    - 在接收到数据，给出应答较困难的网络中使用UDP。（如：无线网络）
    - 适合于广播/组播式通信中。
    - MSN/QQ/Skype等即时通讯软件的点对点文本通讯以及音视频通讯通常采用UDP协议

- ==TCP==

  - 特点

    - 和UDP一样是进程到进程通信的协议，所以使用的是端口号

  - 提供的服务

    - 面向连接的传输：在传输之前一定会先建立连接
    - 端到端的通信：只有目的端和源端才能通信
    - 高可靠服务：能够确保发送方发送的数据能准确无误的被接收方接收
    - 全双工通信：TCP在任何时刻数据可以在任何方向传输
    - 字节流：以字节位为单位进行传输

  - 段格式：头部+数据

    - 头部是20-60字节
    - 源端口地址16位
    - 目的端口地址16位
    - 序列号32位
    - 确认号32位
    - 头部长度4位

  - 三次握手(three-way handshaking)

    - 建立连接
      - 发送SYN：请求连接
      - 回复SYN+ACK：同意连接
      - 回复ACK：建立连接

    ![image-20230305140135943](image\image-20230305140135943.png)

    - 拆除连接
      - 发送FIN：关闭请求
      - 返回FIN+ACK：确认关闭
      - 发送ACK：关闭连接

  - 流量控制
    - 滑窗机制：和数据链路层的ARQ是差不多的，介于回退N帧和选择性重传之间，窗口最大是65535字节

  - 差错控制

    - 每个段都有校验和，接收方接收到后发送ACK，一发一收，具有和之前一样的重传计时器和累计确认，不同的是TCP能够乱序接收但是会根据序列号进行重新排列

- ==TCP有关的字段和序号==  ==常常考计算题==

  - SYN

    - 同步
    - SYN不携带数据，但是占用一个序列号(sequence number)

  - ACK

    - 确认
    - 如果不携带数据，那么不占用序列号

  - seq

    - 段的序号是什么
    - 段的序号和字节序号有什么关系
    - 怎么通过字节序号判断段的序号
    - 知道了段的序号以及发送了多少字节，求出第一个字节和最后一个字节的编号

      ![image-20230305152636309](image\image-20230305152636309.png)



### 第二十四章 拥塞控制和服务质量

- ==TCP拥塞控制==

  - 慢启动(slow star)
    - 从一个段开始然后指数型增长，增长至阈值结束进入拥塞避免
  - 拥塞避免(congestion avoidance)
    - 每次增加一个段，直至遇到拥塞，拥塞避免结束进入拥塞检测
  - 拥塞检测
    - 根据拥塞的现象来判断拥塞严不严重，怎么处理
    - 计时器到则存在严重拥塞
      - 将阈值减半
      - 设置cwnd为一个段的大小
      - 重启慢速启动阶段
    - 接受到三个ACK，则存在轻度拥塞
      - 阈值减半
      - 将cwnd设置为阈值大小
      - 启动拥塞避免阶段

- ==发送窗口==

  - 接收窗口
    - 用于流量控制
    - 只收接收缓存的控制
  - 拥塞窗口
    - 用于拥塞控制
    - 看处于拥塞控制的那个阶段

  > 发送窗口受接受窗口和拥塞窗口的控制，要同时满足流量控制和拥塞控制时，则发送窗口就是取接收窗口和拥塞窗口的最小值



## 第六部分 应用层

### 第二十五章 域名系统

- DNS的工作原理
  - DNS：域名系统，将巨大的信息分割为许多更小的部分，并将每部分分别存入到不同的计算机
  - 当我们需要访问一个网站的时候直接使用了域名，但真正访问的应该是ip地址，那么我们只需要把域名发送非DNS服务器，他就能转化出对应的ip地址


### 第二十六章 远程登录、电子邮件和文件传输

- ==Telnet基本概念==
- SMTP和MIME、POP3和IMAP以及电子邮件的架构，了解即可
- ==FTP文件传输协议==
  - 链接：控制连接和数据连接
    - 控制连接：在FTP回话期间保持始终连接，有控制连接才能控制啊，你要是开开关关怎么控制
    - 数据连接：每次传输文件时开启关闭，有东西要传再开，不然一直开着白浪费
  - 传输方式：通过两个TCP进行传输，也就是控制连接和数据连接
  - 端口
    - 两个端口，什么情况用哪个
    - 控制连接：21
    - 数据连接：20
  - 文件类型
    - ASCII文件
    - 图像文件
    - EBCDIC文件

### 第二十七章 万维网和超文本传输协议

- URL、Cookies概念
- HTTP的概念

